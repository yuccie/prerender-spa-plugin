## 总结

- prerender-spa-plugin只是一个上层应用，
- 其封装的是 @prerenderer/prerenderer 和 @prerenderer/renderer-puppeteer
- 而 @prerenderer/prerenderer 和 @prerenderer/renderer-puppeteer 这两个其实都在[这个仓库](https://github.com/JoshTheDerf/prerenderer)
- @prerenderer/prerenderer其实就是获取的根目录的index.js，而 @prerenderer/renderer-puppeteer获取的是rendeners目录里的

## prerender-spa-plugin

```js
// prerender-spa-plugin 源码之package.json
{
  "name": "prerender-spa-plugin",
  "version": "3.4.0",
  "description": "Flexible, framework-agnostic static site generation for sites and SPAs built with webpack.",
  "license": "MIT",
  "main": "index.js", // 即index.js
  // ...
}


// prerender-spa-plugin 源码之index.js

/**
 * @file Just a super-simple wrapper for determining whether to load the original ES6 version
 * of the code or the ES5 version at runtime.
 * @author Joshua Bemenderfer <tribex10@gmail.com>
 */

// 拿到版本号的一种方式
// Is there a better way to check versions? Haven't really looked into it.
if (parseInt(process.versions.node.split('.')[0]) >= 8) {
  // Native (Node 8+) ES6. (Requires async / await.)
  module.exports = require('./es6/index.js')
} else {
  // Transpiled through babel to target Node 4+.
  module.exports = require('./es5-autogenerated/index.js')
}


// ./es6/index.js
// 其实很简单，引入
const path = require('path')
const Prerenderer = require('@prerenderer/prerenderer')
const PuppeteerRenderer = require('@prerenderer/renderer-puppeteer')
const { minify } = require('html-minifier')

function PrerenderSPAPlugin(...args) {}

PrerenderSPAPlugin.prototype.apply = function (compiler) {}

PrerenderSPAPlugin.PuppeteerRenderer = PuppeteerRenderer

module.exports = PrerenderSPAPlugin

```